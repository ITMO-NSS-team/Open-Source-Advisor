# ModeScheduler

An interactive CLI tool for managing action plans for OSA

Builds and manages a task plan for a selected repository. The plan can be:

- **basic** — a predefined set of tasks
- **auto** — generated by an AI model based on the repository contents
- **advanced** — adjusted by the user during CLI execution

The CLI allows user to:

- View the generated plan
- Confirm or cancel execution
- Edit the plan interactively
- Manage GitHub Actions workflows alongside other tasks

---

## How it works?

Here is a short demo:

![Animation](../../docs/images/osa_cli.gif)

---

## Usage

Run Open-Source-Advisor using the following command:

```sh
python -m osa_tool.run -r {repository} [--mode {mode}] [--api {api}] [--base-url {base_url}] [--model {model_name}]
```

### Required Argument:

`-r`, `--repository` - URL of the repository to be analyzed and processed.

### Available Modes

Before starting, the user needs to specify which mode they want to use:

| Mode                 | Description                                                                                                                                                                                             |
|----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `basic`              | Runs a predefined set of actions: generates Report, README, Community docs, About section.<br/>Organize the repository structure by adding standard 'tests' and 'examples' directories if missing.<br/> |
| `auto`               | Automatically builds a plan using an AI model based on repository analysis.                                                                                                                             |
| `advanced` (default) | Allows the user to manually select and configure which improvements and actions will be applied to the repository.                                                                                      |

### What Happens Next

Once the CLI command is execute, OSA will:

1. Analyze the repository
2. Display informational tables in the console:
    - **Repository and environment info** - general project details, active configuration
    - **Planned actions** — a table listing actions and improvements that are scheduled to be applied.
    - **Inactive actions** — a table showing actions that will not be applied based on the current plan.

### Confirming the Action Plan

```sh
Do you want to proceed with these actions? [y/n/custom] (y)
```

- Enter `y` or simply press **Enter** — to accept the proposed plan and continue execution.
- Enter `n` — to cancel the operation. The program will immediately exit without making any changes
- Enter `custom` — to enter manual editing mode, where user can adjust the plan interactively.

### Manual Plan Editing Mode

In custom mode:

- A list of editable actions will be displayed.
- The user can enter the name of the action to modify, or type `done` to finish editing.
- For each selected action:
    - If it's a **boolean value** (enabled/disabled), you'll be asked to set it to `y`, `n`, or `skip`.
    - If it's a string or list, a new value can be provided, left empty to skip, or the word `None` can be entered to
      explicitly disable this action.

Once the user type `done`:

- The updated tables with planned actions and inactive actions will be displayed again.
- The program will prompt the user one more time to confirm the updated plan
- Available options:
    - Confirm with `y` or **Enter**
    - Cancel with `n`
    - Re-enter manual editing mode with `custom`

This interactive loop continues until the user explicitly confirms or cancels the operation.

This mode allows for precise control over which improvements, documentation, or workflow-related actions will be applied
to the repository.